<div>

  <div>

    <div class="add-button">
      <button mat-raised-button class="add-device-button" (click)="openDeviceDialog()">Add device</button>
    </div>

    <div class="mat-elevation-z4">

      <div class="table-container">

        <table mat-table [dataSource]="dataSource" class="mat-elevation-z8 device-table">

          <ng-container matColumnDef="edit">
            <th mat-header-cell *matHeaderCellDef class="edit-column"></th>
            <td mat-cell *matCellDef="let element">
              <button mat-icon-button (click)="openDeviceDialog(element)">
                <mat-icon fontSet="material-icons-outlined" class="edit-button">edit</mat-icon>
              </button>
            </td>
          </ng-container>

          <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef>NAME</th>
            <td mat-cell *matCellDef="let element" class="device-detail">{{element.name}}</td>
          </ng-container>

          <ng-container matColumnDef="description">
            <th mat-header-cell *matHeaderCellDef>DESCRIPTION</th>
            <td mat-cell *matCellDef="let element" class="device-detail">{{element.description}}</td>
          </ng-container>

          <ng-container matColumnDef="address">
            <th mat-header-cell *matHeaderCellDef>ADDRESS</th>
            <td mat-cell *matCellDef="let element" class="device-detail">{{element.address}}</td>
          </ng-container>

          <ng-container matColumnDef="maximumHourlyEnergyConsumption">
            <th mat-header-cell *matHeaderCellDef>MAXIMUM HOURLY ENERGY CONSUMPTION</th>
            <td mat-cell *matCellDef="let element" class="device-detail">{{element.maximumHourlyEnergyConsumption}}</td>
          </ng-container>

          <ng-container matColumnDef="allocated employee">
            <th mat-header-cell *matHeaderCellDef>ALLOCATED CLIENT</th>
            <td mat-cell *matCellDef="let element" class="employee">

              <ng-container>

                <div class="user-name">{{element.userName}}</div>

                <mat-select class="options-style">
                  <label *ngIf="element.userName === '' || element.userName === null"
                          class="allocate">
                    <mat-option *ngFor="let client of clients" (click)="allocateDevice(client.id, element.id)" class="mat-option-style">
                        {{client.name}}
                    </mat-option>
                  </label>
                  <label *ngIf="element.userName !== '' && element.userName !== null"
                           class="reallocate">
                    <mat-option *ngFor="let client of clients" (click)="reallocateDevice(client.id, element.id)" class="mat-option-style">
                      {{client.name}}
                    </mat-option>
                  </label>
                  <label class="deallocate">
                    <mat-option (click)="deallocateDevice(element.id)" class="mat-option-style">
                      None
                    </mat-option>
                  </label>
                </mat-select>
              </ng-container>

            </td>
          </ng-container>

          <ng-container matColumnDef="delete">
            <th mat-header-cell *matHeaderCellDef class="delete-column"></th>
            <td mat-cell *matCellDef="let element">
              <button mat-icon-button (click)="openDeleteDeviceDialog(element.id)">
                <mat-icon class="delete-button">delete_outline</mat-icon>
              </button>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
      </div>
    </div>
  </div>
</div>

